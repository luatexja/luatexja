%
% lltjp-stfloats.sty
%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{lltjp-stfloats}[2017/01/19 Patch to stfloats for LuaTeX-ja]

\RequirePackage{stfloats,luatexja}
\RequirePackage{etoolbox}

\let\ltj@fn@makecol=\fn@makecol

\patchcmd\fn@makecol{\vskip -\dimen@}%
  {\ifnum\ltjgetparameter{direction}=4\else\vbox{\hskip\z@}\fi %%% LuaTeX-ja
   \vskip -\dimen@}{}{}

\ifx\@makecol\ltj@fn@makecol
  \global\let\@makecol\fn@makecol
\fi
\endinput
