%
% lltjp-array.sty
%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{lltjp-array}[2024-06-10 Patch to array for LuaTeX-ja]

\RequirePackage{etoolbox,array}

\patchcmd\insert@column{%
   \ignorespaces\@sharp\unskip
}{%
   \ltj@sharp
}{}{% >=2024-06-01
  \def\ltj@sharp{\relax\pltx@next@inhibitglue\ltjfakeboxbdd\ignorespaces\@sharp\textonly@unskip\ltjfakeboxbdd}
  \patchcmd\insert@column{%
     \ignorespaces\@sharp\textonly@unskip
  }{%
     \ltj@sharp
  }{}{}
}

\@ifpackageloaded{lltjext}{}{%
%% remove extra \xkanjiskip (pLaTeX2e 2016/04/17)
\def\@tabular{%
	    \leavevmode \null
	    \hbox \bgroup $\col@sep\tabcolsep \let\d@llarbegin\begingroup
	                                      \let\d@llarend\endgroup
	    \@tabarray}
\def\endtabular{\endarray $\egroup\null}
\expandafter \let \csname endtabular*\endcsname = \endtabular
}
\endinput
