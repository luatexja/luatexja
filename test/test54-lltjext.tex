%#!luajitlatex
\ifdefined\directlua
  \documentclass{ltjsarticle}
  \usepackage{lltjext}
\else
  \documentclass{jsarticle}
  \usepackage{plext}
  \usepackage{otf}
\fi
\pagestyle{empty}
\usepackage[T1]{fontenc}
\usepackage[a6paper,landscape,margin=10mm,top=5mm]{geometry}
\let\mcdefault\gtdefault
\let\rmdefault\sfdefault
\newdimen\WIDTH\WIDTH30\cwd

\def\AX{\adjustbaseline
  \ifdefined\directlua\ltjsetparameter{autospacing=false, autoxspacing=false}%
  \else\noautospacing\noautoxspacing\fi}
\def\TEST#1#2{\newpage
\hbox to 40\cwd{\hss\vtop{\hsize=\WIDTH#1
\normalsize
\section{組方向: \string#1，ボックス: #2}
\AX
\paragraph{tabular}\

あいうxyz%
\begin{tabular}<#2>[t]{ll}
\hline
上(\texttt{t} opt)，罫あり&T\\
\hline
\end{tabular}
えおabc\hfil\penalty0\hfilneg あxyz%
\begin{tabular}<#2>[c]{l}
\hline
中央(\texttt{c} opt)，罫あり\\
\hline
\end{tabular}
えabc\hfil\penalty0\hfilneg あxyz%
\begin{tabular}<#2>[b]{l}
\hline
下(\texttt{b} opt)，罫あり\\
\hline
\end{tabular}
えabc\hfil\penalty0\hfilneg あxyz
\begin{tabular}<#2>[t]{l}
上(\texttt{t} opt)，罫なし\\
\end{tabular}えabc\hfil\penalty0\hfilneg 
あxyz%
\begin{tabular}<#2>[c]{l}
中央(\texttt{c} opt)，罫なし\\
\end{tabular}えabc\hfil\penalty0\hfilneg 
あxyz%
\begin{tabular}<#2>[b]{l}
下(\texttt{b} opt)，罫なし\\
\end{tabular}あxyz
}}

\newpage
\hbox to 40\cwd{\hss\vtop{\hsize=\WIDTH#1
\AX

\paragraph{minipage}\

あいうxyz%
\begin{minipage}<#2>[t]{10\cwd}
そのため、
仮に区単位でカテゴリコードを変更できるようにしても、SJIS版
\end{minipage}あいうxyz%
\begin{minipage}<#2>[c]{10\cwd}
そのため、
仮に区単位でカテゴリコードを変更できるようにしても、SJIS版
\end{minipage}\hfil\penalty0\hfilneg あいうxyz%
\begin{minipage}<#2>[b]{10\cwd}
そのため、
仮に区単位でカテゴリコードを変更できるようにしても、SJIS版
\end{minipage}あいうxyz
}}

\newpage
\hbox to 40\cwd{\hss\vtop{\hsize=\WIDTH#1
\subsection*{組方向: \string#1，ボックス: #2 後半}
\AX
\paragraph{parbox}\

あいうxyz\nobreak%
\parbox<#2>[t]{10\cwd}{%
そのため、
仮に区単位でカテゴリコードを変更できるようにしても、SJIS版}%
えおabc\hfil\penalty0\hfilneg あいうxyz\nobreak%
\parbox<#2>[c]{10\cwd}{%
そのため、
仮に区単位でカテゴリコードを変更できるようにしても、SJIS版}%
えおabc\hfil\penalty0\hfilneg あいうxyz\nobreak%
\parbox<#2>[b]{10\cwd}{%
そのため、
仮に区単位でカテゴリコードを変更できるようにしても、SJIS版}%
えおabc
}}

\newpage
\hbox to 40\cwd{\hss\vtop{\hsize=\WIDTH#1

\paragraph{pbox}\

\AX\noindent
あいうxyz\nobreak\pbox<#2>[10\cwd][l]{\AX%
  計算機（Computer）}えおabc\hfil\penalty0\hfilneg
あいうxyz\nobreak\pbox<#2>[10\cwd][c]{\AX%
  計算機（Computer）}えおabc\hfil\penalty0\hfilneg
あいうxyz\nobreak\pbox<#2>[10\cwd][r]{\AX%
  計算機（Computer）}えおabc

\paragraph{rensuji, bou}\ 

aa◆\rensuji[l]{1701}◆\rensuji[c]{1701}◆◆\rensuji[r]{1701}◆aa

◆◆\kasen{◆◆◆◆◆◆◆◆◆◆◆◆}◆◆◆

◆◆\rensuji*[l]{1701}◆\rensuji*[c]{1701}◆◆\rensuji*[r]{1701}◆

◆◆◆\bou{◆◆◆◆◆◆◆◆◆◆◆}◆◆◆◆◆

}}}
\begin{document}
\ifdefined\directlua
\message{\the\dimexpr 1\zw}%
\else
\message{\the\dimexpr 1zw}%
\fi
%\tracingifs2\tracingonline2
\TEST{\yoko}{y}
\TEST{\yoko}{t}
\TEST{\yoko}{z}
\TEST{\tate}{y}
\TEST{\tate}{t}
\TEST{\tate}{z}

\ifdefined\directlua
\TEST{\yoko}{d}
\TEST{\yoko}{u}

\TEST{\tate}{d}
\TEST{\tate}{u}

\TEST{\dtou}{y}
\TEST{\dtou}{t}
\TEST{\dtou}{z}
\TEST{\dtou}{d}
\TEST{\dtou}{u}

\TEST{\utod}{y}
\TEST{\utod}{t}
\TEST{\utod}{z}
\TEST{\utod}{d}
\TEST{\utod}{u}
\fi
\end{document}


