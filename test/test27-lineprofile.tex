\documentclass[10ptj]{ltjsarticle}
\usepackage[width=40\zw, lines=40,centering]{geometry}
\usepackage{amsmath,luacode,xcolor,luatexja-adjust}
\begin{document}
% #1: null（TeX 既定） or profile（行の中身を考慮した行間測定）
% #2: null（TeX 既定）
%   or step（行送りが \baselineskip で十分でなかった場合，
%            lineskip.step_factor * \baselineskip の倍数だけ広げて
%            行間が \lineskip 以上になるようにする）
\def\R#1#2{\directlua{luatexja.lineskip.setting('#1','#2')}%
\noindent\fbox{\parbox{25\zw}{%
\baselineskip14pt\noindent
\setbox2=\vtop{\noindent\hsize20\zw\textcolor{cyan!30!white}{%
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■□□□□■
 □□□□■□□□□■□□□□■□□□□■
}}\dp2=0pt\rlap{\copy2}\par\vspace*{-\baselineskip}
\textbf{#1, #2}\\
\vrule height 2pt depth 0pt width 10\zw\\
\vrule height 2pt depth 0pt width 10\zw\\
\the\baselineskip あああああああああああああああ\\
あああああああああ$X_{X_{X_X}}$ああああああ\\
ああああああああああああああああああ\\
……であるから$b=\dfrac1{X_2}$となる．\\
一方$\dfrac{A^A}{B_B}=21$なので……\\
……であるから$b=\dfrac1{X_2}$となる．\\%\vadjust{あああああ$\dfrac34$}\\
一方$\dfrac{A^A}{B_B}=21$なので……

あいであるから$b=\dfrac1{X_2}$となる．新段落！\\
一方$\dfrac{A^A}{B_B}=21$なので……

\hbox{感じ感じ$\displaystyle\int$}
ほげであるから$b=\dfrac1{X_2}$となる．新段落！\\
一方$\dfrac{A^A}{B_B}=21$なので……

\hrule
かきであるから$b=\dfrac1{X_2}$となる．hrule無効\\
一方$\dfrac{A^A}{B_B}=21$なので……

\prevdepth0pt
うえであるから$b=\dfrac1{X_2}$prevdepth設定のため無効\\
一方$\dfrac{A^A}{B_B}=21$なので……
}}\newpage}


\R{null}{null}
\R{profile}{null}
\R{null}{step}
\R{profile}{step}

\end{document}
