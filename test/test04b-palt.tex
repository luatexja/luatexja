\documentclass{article}
\usepackage{luatexja}
%\input lua-visual-debug.sty
\begin{document}
\def\FN{KozMinPr6N-Regular.otf}\let\FT=\FN
\def\FT{KozMinPr6N-Regular.otf}

\jfont\kzdfn=\FN:jfm=prop;-kern
\jfont\kzdfk=\FN:jfm=prop;+kern
\jfont\kzpan=\FN:jfm=prop;+palt;-kern
\jfont\kzpak=\FN:jfm=prop;+palt;+kern
\jfont\kzpwn=\FN:jfm=prop;+pwid;-kern
\jfont\kzpwk=\FN:jfm=prop;+pwid;+kern
\ltjsetparameter{xkanjiskip=10pt}
\tracingonline1\showboxdepth1000\showboxbreadth10000
\def\TEST#1{%
  \setbox0=\hbox{#1アイちょっと}
  %\setbox0=\hbox{アイ}
  \directlua{
    print("TEST \luatexluaescapestring{\string#1}")
    luatexja.ext_show_node_list(tex.getbox(0), '> ', print)
  }\par\texttt{\string#1}: \hbox to 80pt{\vrule\copy0\vrule\hss}\the\wd0
}

\jfont\kzhan=\FN:jfm=prop;+halt;-kern
\TEST\kzdfn
\TEST\kzdfk
\TEST\kzpan
\TEST\kzpak
\TEST\kzpwn
\TEST\kzpwk

\def\TEST#1{%
  \setbox0=\hbox{#1ア［い・う］}
  %\setbox0=\hbox{アイ}
  \directlua{
    print("TEST \luatexluaescapestring{\string#1}")
    luatexja.ext_show_node_list(tex.getbox(0), '> ', print)
  }\par\texttt{\string#1}: \hbox to 80pt{\vrule\copy0\vrule\hss}\the\wd0
}

\TEST\kzdfn
\TEST\kzdfk
\TEST\kzpan
\TEST\kzhan

\par
\vbox{\tate%
\tfont\tkzdf=\FT:jfm=propv;-vkrn;-kern
\tfont\tkzdv=\FT:jfm=propv;+vkrn;-kern
\tfont\tkzva=\FT:jfm=propv;+vpal;-kern
\tfont\tkzvb=\FT:jfm=propv;+vpal;+vkrn;-kern
\tfont\tkzvc=\FT:jfm=propv;+vpal;+vapk;-kern
\tfont\tkzvp=\FT:jfm=propv;+pwid;-kern
\tfont\tkzvq=\FT:jfm=propv;+pwid;+vkrn;-kern
\tfont\thrdv=HiraMinProN-W3.otf:jfm=propv;+vkrn;-kern
\tfont\ttmdf=FOT-TsukuMinPr6N-R.otf:jfm=propv;-vkrn;-kern
\tfont\ttmdv=FOT-TsukuMinPr6N-R.otf:jfm=propv;+vkrn;-kern
\tfont\ttmva=FOT-TsukuMinPr6N-R.otf:jfm=propv;+vpal;-kern
\tfont\ttmvb=FOT-TsukuMinPr6N-R.otf:jfm=propv;+vpal;+vkrn;-kern
\tfont\ttmvq=FOT-TsukuMinPr6N-R.otf:jfm=propv;+pwid;+vkrn;-kern
\tfont\tyudv=JJSYuMinchoPr6N-R.otf:jfm=propv;+vkrn;-kern
\tfont\tyudf=JJSYuMinchoPr6N-R.otf:jfm=propv;-vkrn;-kern

\catcode`\@=11\relax
\def\TEST#1{%
  \setbox0=\hbox{\tate#1ちょっとアノ、}
  \directlua{
    print('TEST \luatexluaescapestring{\string#1}')
    luatexja.ext_show_node_list(tex.getbox(0), '> ', print, 3)
  }%
  \par\texttt{\string#1}: \hbox to 120pt{\vrule\copy0\vrule\hss}%
  \hbox to 40pt{\strip@pt\wd0\hss}\relax
}
\TEST\tkzdf
\TEST\tkzdv\ \texttt{\ \ \ \ \ \ +vkrn}
\TEST\tkzva\ \texttt{+vpal}
\TEST\tkzvb\ \texttt{+vpal +vkrn}
%\TEST\tkzvc\ \texttt{+vpal +vapk}
\TEST\tkzvp\ \texttt{+pwid}
\TEST\tkzvq\ \texttt{+pwid +vkrn}
\TEST\thrdv\ \texttt{\ \ \ \ \ \ +vkrn}
\TEST\ttmdf\ \texttt{}
\TEST\ttmdv\ \texttt{\ \ \ \ \ \ +vkrn}
\TEST\ttmva\ \texttt{+vpal}
\TEST\ttmvb\ \texttt{+vpal +vkrn}
\TEST\ttmvq\ \texttt{+pwid +vkrn}
\TEST\tyudf\ \texttt{}
\TEST\tyudv\ \texttt{\ \ \ \ \ \ +vkrn}

\tfont\tkzha=\FT:jfm=propv;+vhal;-kern
\tfont\tkzhb=\FT:jfm=propv;+vhal;+vkrn;-kern
\def\TEST#1{%
  \setbox0=\hbox{\tate#1アノ［］と}
  \directlua{
    print('TEST \luatexluaescapestring{\string#1}')
    luatexja.ext_show_node_list(tex.getbox(0), '> ', print, 3)
  }%
  \par\texttt{\string#1}: \hbox to 120pt{\vrule\copy0\vrule\hss}%
  \hbox to 40pt{\strip@pt\wd0\hss}\relax
}
\TEST\tkzdf
\TEST\tkzdv\ \texttt{\ \ \ \ \ \ +vkrn}
\TEST\tkzva\ \texttt{+vpal}
\TEST\tkzvb\ \texttt{+vpal +vkrn}
\TEST\tkzha\ \texttt{+vpal}
\TEST\tkzhb\ \texttt{+vpal +vkrn}


}
\end{document}

